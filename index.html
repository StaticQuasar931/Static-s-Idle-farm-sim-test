<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tamagotchi Game v1.4</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to bottom, #e0f7fa, #80deea);
            margin: 0;
            text-align: center;
            padding: 0;
            transition: background-color 0.5s ease;
        }
        .game-container {
            max-width: 900px;
            margin: 30px auto;
            padding: 20px;
            background: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        h1 {
            font-size: 2.5em;
            color: #00796b;
        }
        .stats, .stat-bar {
            display: flex;
            justify-content: space-between;
        }
        .stat-bar div {
            background: #ddd;
            height: 15px;
            border-radius: 5px;
            overflow: hidden;
            margin: 5px 0;
        }
        .bar-fill {
            height: 100%;
            background: #4caf50;
            transition: width 0.3s;
        }
        button {
            padding: 12px 18px;
            margin: 10px;
            border-radius: 5px;
            border: none;
            background: #00796b;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background: #005f57;
        }
        #message {
            margin-top: 20px;
            font-size: 1.2em;
        }
        .menu {
            display: none;
            background: white;
            border: 2px solid #00796b;
            border-radius: 10px;
            padding: 20px;
            margin: 20px auto;
            max-width: 500px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .dark-mode {
            background: #333;
            color: white;
        }
        .dark-mode .game-container {
            background: #444;
            border-color: #555;
        }
        .dark-mode button {
            background: #555;
            color: white;
        }
        .dark-mode button:hover {
            background: #333;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Tamagotchi Game</h1>
        <div id="tamagotchi" style="font-size: 100px;">üê£</div>
        <p>Stage: <span id="stage">Baby</span></p>
        <div class="stats">
            <div>
                Hunger
                <div class="stat-bar"><div id="hunger-bar" class="bar-fill"></div></div>
            </div>
            <div>
                Happiness
                <div class="stat-bar"><div id="happiness-bar" class="bar-fill"></div></div>
            </div>
            <div>
                Hygiene
                <div class="stat-bar"><div id="hygiene-bar" class="bar-fill"></div></div>
            </div>
        </div>
        <div>
            <button onclick="feed()">Feed</button>
            <button onclick="play()">Play</button>
            <button onclick="clean()">Clean</button>
            <button onclick="toggleMenu()">Mini-Games</button>
            <button onclick="saveGame()">Save</button>
            <button onclick="loadGame()">Load</button>
            <button onclick="toggleDarkMode()">Dark Mode</button>
            <button onclick="resetGame()">Restart</button>
        </div>
        <p id="message"></p>
    </div>
    <div class="menu" id="menu">
        <h2>Mini-Games</h2>
        <button onclick="startGuessNumber()">Guess the Number</button>
        <button onclick="startMemoryGame()">Memory Game</button>
        <button onclick="startClickerGame()">Clicker Game</button>
        <button onclick="closeMenu()">Close Menu</button>
    </div>
    <script>
        const stats = JSON.parse(localStorage.getItem("tamagotchiStats")) || {
            hunger: 100,
            happiness: 100,
            hygiene: 100,
            age: 0,
            stage: "Baby",
        };

        const stages = [
            { name: "Baby", emoji: "üê£", age: 0 },
            { name: "Child", emoji: "üê•", age: 5 },
            { name: "Teen", emoji: "üê§", age: 10 },
            { name: "Adult", emoji: "üêî", age: 20 },
        ];

        const darkModeEnabled = JSON.parse(localStorage.getItem("darkMode")) || false;

        if (darkModeEnabled) {
            document.body.classList.add("dark-mode");
        }

        function updateUI() {
            document.getElementById("hunger-bar").style.width = `${stats.hunger}%`;
            document.getElementById("happiness-bar").style.width = `${stats.happiness}%`;
            document.getElementById("hygiene-bar").style.width = `${stats.hygiene}%`;
            const stage = stages.find(s => stats.age >= s.age);
            if (stage.name !== stats.stage) {
                stats.stage = stage.name;
                document.getElementById("tamagotchi").textContent = stage.emoji;
                document.getElementById("stage").textContent = stage.name;
            }
        }

        function showMessage(message) {
            document.getElementById("message").textContent = message;
            setTimeout(() => {
                document.getElementById("message").textContent = "";
            }, 3000);
        }

        function toggleDarkMode() {
            document.body.classList.toggle("dark-mode");
            localStorage.setItem("darkMode", JSON.stringify(document.body.classList.contains("dark-mode")));
        }

        function toggleMenu() {
            const menu = document.getElementById("menu");
            menu.style.display = menu.style.display === "none" || menu.style.display === "" ? "block" : "none";
        }

        function closeMenu() {
            document.getElementById("menu").style.display = "none";
        }

        function feed() {
            stats.hunger = Math.min(100, stats.hunger + 20);
            showMessage("You fed your Tamagotchi!");
            updateUI();
        }

        function play() {
            stats.happiness = Math.min(100, stats.happiness + 15);
            showMessage("You played with your Tamagotchi!");
            updateUI();
        }

        function clean() {
            stats.hygiene = Math.min(100, stats.hygiene + 25);
            showMessage("Your Tamagotchi is clean!");
            updateUI();
        }

        function startGuessNumber() {
            const number = Math.floor(Math.random() * 10) + 1;
            let guess;
            let attempts = 0;
            while (guess !== number) {
                guess = parseInt(prompt("Guess the number (1-10):"));
                if (guess === number) {
                    showMessage(`Correct! Attempts: ${attempts}`);
                    stats.happiness = Math.min(100, stats.happiness + 15);
                } else if (guess > number) {
                    showMessage("Too high!");
                } else {
                    showMessage("Too low!");
                }
                attempts++;
            }
            updateUI();
        }

        function startMemoryGame() {
            let sequence = [];
            const colors = ["Red", "Blue", "Green", "Yellow"];

            function generateSequence() {
                sequence.push(colors[Math.floor(Math.random() * colors.length)]);
            }

            function showSequence() {
                alert("Sequence: " + sequence.join(", "));
            }

            function getUserSequence() {
                return prompt("Enter the sequence (comma-separated):").split(", ");
            }

            generateSequence();
            showSequence();
            const userSequence = getUserSequence();
            if (JSON.stringify(userSequence) === JSON.stringify(sequence)) {
                showMessage("Correct!");
                stats.happiness = Math.min(100, stats.happiness + 10);
            } else {
                showMessage("Incorrect sequence!");
            }
            updateUI();
        }

        function startClickerGame() {
            let score = 0;
            const duration = 5000;
            const endTime = Date.now() + duration;

            function clickHandler() {
                if (Date.now() < endTime) {
                    score++;
                } else {
                    document.removeEventListener("click", clickHandler);
                    showMessage(`Time's up! Score: ${score}`);
                    stats.happiness = Math.min(100, stats.happiness + score);
                    updateUI();
                }
            }

            showMessage("Click as fast as you can!");
            document.addEventListener("click", clickHandler);
        }

        function saveGame() {
            localStorage.setItem("tamagotchiStats", JSON.stringify(stats));
            showMessage("Game saved!");
        }

        function loadGame() {
            const savedStats = JSON.parse(localStorage.getItem("tamagotchiStats"));
            if (savedStats) {
                Object.assign(stats, savedStats);
                updateUI();
                showMessage("Game loaded!");
            } else {
                showMessage("No saved game found.");
            }
        }

        function resetGame() {
            Object.assign(stats, {
                hunger: 100,
                happiness: 100,
                hygiene: 100,
                age: 0,
                stage: "Baby",
            });
            updateUI();
            showMessage("Game restarted!");
        }

        setInterval(() => {
            stats.hunger = Math.max(0, stats.hunger - 5);
            stats.happiness = Math.max(0, stats.happiness - 2);
            stats.hygiene = Math.max(0, stats.hygiene - 3);
            stats.age += 0.1;
            updateUI();
        }, 5000);

        updateUI();
    </script>
</body>
</html>
